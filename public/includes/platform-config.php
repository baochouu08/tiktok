<?php

$platformConfigs = [
    'tiktok' => [
        'name' => 'TikTok',
        'icon' => '/assets/images/platforms/tiktok.svg',
        'color' => '#00f2ea',
        'pageTitle' => 'TikTok Video Downloader Without Watermark - Download TikTok Videos HD 4K Free 2025',
        'metaDescription' => 'Free TikTok video downloader 2025 - Download TikTok videos without watermark in HD, 4K, 1080p quality. Save TikTok videos and MP3 audio to any device. No app needed. Fast, unlimited, 100% free.',
        'metaKeywords' => 'tiktok downloader, tiktok video downloader, download tiktok video, tiktok no watermark, tiktok downloader without watermark, save tiktok video, tiktok to mp4, tiktok hd download, download tiktok, tiktok audio download, tiktok mp3, tiktok 4k download',
        'h1' => 'TikTok Video Downloader - No Watermark, HD Quality',
        'subtitle' => 'Download TikTok videos without watermark in HD, 4K, 1080p | MP4 & MP3 formats | Free, fast & unlimited downloads | Works on all devices',
        'placeholder' => 'Paste TikTok video link here (https://www.tiktok.com/@username/video/... or https://vm.tiktok.com/...)',
        'faq' => [
            [
                'question' => 'How do I download TikTok videos without watermark?',
                'answer' => 'Simply copy the TikTok video link, paste it into our downloader above, and click Start. Our tool automatically removes the watermark and provides you with a clean HD video file in MP4 format. The entire process takes only 2-3 seconds.'
            ],
            [
                'question' => 'Is this TikTok downloader free to use?',
                'answer' => 'Yes, 100% free with unlimited downloads. No registration, no subscription, no hidden fees. You can download as many TikTok videos as you want, anytime, from any device.'
            ],
            [
                'question' => 'What video quality can I download from TikTok?',
                'answer' => 'Our TikTok downloader supports multiple quality options including 4K, 1080p (Full HD), 720p (HD), 480p, and 360p. The available quality depends on the original video upload quality. Most TikTok videos are available in HD 1080p or 720p.'
            ],
            [
                'question' => 'Can I download TikTok videos on iPhone or Android?',
                'answer' => 'Yes! Our TikTok downloader works on all mobile devices including iPhone (iOS 13+), iPad, Android phones and tablets. Just use your mobile browser (Safari, Chrome, Firefox) - no app installation required.'
            ],
            [
                'question' => 'Can I download TikTok audio/music only as MP3?',
                'answer' => 'Absolutely! After pasting the TikTok video link, you\'ll see both "Download Video" and "Download Audio" options. The audio is extracted and saved as MP3 file with high quality, perfect for using the music separately.'
            ],
            [
                'question' => 'Do I need a TikTok account to download videos?',
                'answer' => 'No TikTok account or login required. Our downloader works for all public TikTok videos. Just copy the video link and download - it\'s that simple.'
            ],
            [
                'question' => 'Does this work with TikTok links from any country?',
                'answer' => 'Yes, our TikTok downloader supports videos from all countries and regions. Whether it\'s TikTok.com (international) or regional versions, we can download them all without watermark.'
            ],
            [
                'question' => 'Is it safe to use this TikTok video downloader?',
                'answer' => 'Completely safe and secure. We use SSL encryption, don\'t store your data, and don\'t require any personal information. Our service is web-based with no software installation, eliminating malware risks.'
            ]
        ],
        'howTo' => [
            'step1' => 'Copy the TikTok video link from the app or browser',
            'step2' => 'Paste the link in the input box above and click Start',
            'step3' => 'Click Download Video or Download Audio to save to your device'
        ]
    ],
    'instagram' => [
        'name' => 'Instagram',
        'icon' => '/assets/images/platforms/instagram.svg',
        'color' => '#E4405F',
        'pageTitle' => 'Instagram Video Downloader - Download Instagram Reels, Photos, Stories HD Free 2025',
        'metaDescription' => 'Free Instagram downloader 2025 - Download Instagram videos, Reels, photos, Stories, IGTV in HD 1080p. No login required. Save IG content to any device. Fast, unlimited & 100% free.',
        'metaKeywords' => 'instagram downloader, instagram video downloader, download instagram reels, instagram photo downloader, save instagram stories, instagram reels download, instagram story saver, ig downloader, download instagram videos, instagram to mp4, instagram hd download',
        'h1' => 'Instagram Video & Photo Downloader - Reels, Stories, IGTV',
        'subtitle' => 'Download Instagram Reels, videos, photos & Stories in Full HD 1080p | All formats supported | No login needed | Free unlimited downloads',
        'placeholder' => 'Paste Instagram link (Posts, Reels, Stories, IGTV, Highlights)',
        'faq' => [
            [
                'question' => 'Can I download Instagram Reels?',
                'answer' => 'Yes, you can download Instagram Reels, videos, photos, stories, and IGTV content easily with our tool.'
            ],
            [
                'question' => 'What quality are Instagram downloads?',
                'answer' => 'We provide the highest quality available - up to HD quality for videos and full resolution for photos.'
            ],
            [
                'question' => 'Can I download private Instagram content?',
                'answer' => 'No, you can only download public Instagram content. Private accounts cannot be accessed.'
            ],
            [
                'question' => 'Do I need an Instagram account?',
                'answer' => 'No Instagram login required. Just paste the public post link and download.'
            ]
        ],
        'howTo' => [
            'step1' => 'Copy the Instagram post, reel, or story link',
            'step2' => 'Paste the link in the input box and click Start',
            'step3' => 'Download the video or photo to your device'
        ]
    ],
    'youtube' => [
        'name' => 'YouTube',
        'icon' => '/assets/images/platforms/youtube.svg',
        'color' => '#FF0000',
        'pageTitle' => 'YouTube Video Downloader - Download YouTube Videos MP4 HD 4K 8K Free 2025',
        'metaDescription' => 'Free YouTube downloader 2025 - Download YouTube videos in MP4, MP3, HD 1080p, 4K, 8K quality. Save YouTube videos & audio. No software needed. Fast, unlimited & 100% free.',
        'metaKeywords' => 'youtube downloader, youtube video downloader, download youtube videos, youtube to mp4, youtube mp3 download, youtube hd download, youtube 4k download, save youtube video, youtube converter, youtube downloader free',
        'h1' => 'YouTube Video Downloader - MP4, HD, 4K, 8K',
        'subtitle' => 'Download YouTube videos in MP4, HD 1080p, 4K, 8K | MP3 audio extraction | All quality options | Free unlimited downloads | No software required',
        'placeholder' => 'Paste YouTube video URL (youtube.com/watch?v=... or youtu.be/...)',
        'faq' => [
            [
                'question' => 'Can I download YouTube videos in 4K?',
                'answer' => 'Yes, our YouTube downloader supports multiple quality options including 4K, 1080p HD, 720p, and lower resolutions.'
            ],
            [
                'question' => 'Can I download YouTube audio only?',
                'answer' => 'Yes, you can extract and download audio from YouTube videos in MP3 format with high quality.'
            ],
            [
                'question' => 'Is it legal to download YouTube videos?',
                'answer' => 'Downloading YouTube videos is for personal use only. Respect copyright laws and content creators rights.'
            ],
            [
                'question' => 'Does it work on mobile devices?',
                'answer' => 'Yes, our YouTube downloader works perfectly on all devices - smartphones, tablets, and desktop computers.'
            ]
        ],
        'howTo' => [
            'step1' => 'Copy the YouTube video URL from your browser',
            'step2' => 'Paste it in the input box above and click Start',
            'step3' => 'Choose your preferred quality and download'
        ]
    ],
    'twitter' => [
        'name' => 'Twitter/X',
        'icon' => '/assets/images/platforms/twitter.svg',
        'color' => '#1DA1F2',
        'pageTitle' => 'Twitter Video Downloader - Download X Videos & GIFs HD 4K Free 2025',
        'metaDescription' => 'Free Twitter/X video downloader 2025 - Download Twitter videos, GIFs in HD 1080p, 4K quality. Save X videos & MP3 audio. No login needed. Fast, unlimited & 100% free.',
        'metaKeywords' => 'twitter downloader, twitter video downloader, download twitter video, x video downloader, twitter to mp4, save twitter video, twitter gif download, x downloader, download x videos, twitter hd download',
        'h1' => 'Twitter/X Video Downloader - HD, 4K, GIF',
        'subtitle' => 'Download Twitter/X videos & GIFs in Full HD 1080p, 4K | MP4 & MP3 formats | No login required | Free unlimited downloads',
        'placeholder' => 'Paste Twitter/X post URL (twitter.com/... or x.com/...)',
        'faq' => [
            [
                'question' => 'Can I download Twitter videos in HD?',
                'answer' => 'Yes, we support HD quality downloads for Twitter videos when available in the original tweet.'
            ],
            [
                'question' => 'Can I download Twitter GIFs?',
                'answer' => 'Yes, you can download both videos and GIFs from Twitter/X posts.'
            ],
            [
                'question' => 'Do I need to be logged in to Twitter?',
                'answer' => 'No, you don\'t need a Twitter account. Just paste the public tweet link.'
            ],
            [
                'question' => 'What about private Twitter accounts?',
                'answer' => 'Only public tweets can be downloaded. Private account content is not accessible.'
            ]
        ],
        'howTo' => [
            'step1' => 'Copy the Twitter/X post link containing the video',
            'step2' => 'Paste the link and click Start to analyze',
            'step3' => 'Download the video in your preferred quality'
        ]
    ],
    'facebook' => [
        'name' => 'Facebook',
        'icon' => '/assets/images/platforms/facebook.svg',
        'color' => '#1877F2',
        'pageTitle' => 'Facebook Video Downloader - Download FB Reels, Videos, Stories HD Free 2025',
        'metaDescription' => 'Free Facebook downloader 2025 - Download Facebook videos, Reels, Stories in HD 1080p, 4K quality. Save FB Watch videos. No login needed. Fast, unlimited & 100% free.',
        'metaKeywords' => 'facebook downloader, facebook video downloader, download facebook videos, facebook reels downloader, fb downloader, save facebook video, facebook to mp4, facebook story downloader, facebook hd download',
        'h1' => 'Facebook Video Downloader - Reels, Stories, FB Watch',
        'subtitle' => 'Download Facebook Reels, videos, Stories & FB Watch in Full HD 1080p, 4K | MP4 format | No login required | Free unlimited downloads',
        'placeholder' => 'Paste Facebook video URL (facebook.com/... or fb.watch/...)',
        'faq' => [
            [
                'question' => 'Can I download Facebook Reels?',
                'answer' => 'Yes, you can download Facebook Reels, regular videos, and stories easily.'
            ],
            [
                'question' => 'What quality is available for Facebook videos?',
                'answer' => 'We offer HD quality downloads when available in the original Facebook post.'
            ],
            [
                'question' => 'Can I download private Facebook videos?',
                'answer' => 'No, only public Facebook videos can be downloaded.'
            ],
            [
                'question' => 'Is Facebook login required?',
                'answer' => 'No login needed. Just copy and paste the public video link.'
            ]
        ],
        'howTo' => [
            'step1' => 'Copy the Facebook video or reel link',
            'step2' => 'Paste it in the input box and click Start',
            'step3' => 'Download the video to your device'
        ]
    ],
    'douyin' => [
        'name' => 'Douyin',
        'icon' => '/assets/images/platforms/douyin.svg',
        'color' => '#00f2ea',
        'pageTitle' => 'Douyin Video Downloader - 抖音视频下载 Download Douyin Videos No Watermark HD 2025',
        'metaDescription' => 'Free Douyin downloader 2025 - Download Douyin (抖音) videos without watermark in HD 1080p, 4K. 抖音视频无水印下载. Save Douyin videos & MP3 audio. Fast, unlimited & 100% free.',
        'metaKeywords' => 'douyin downloader, 抖音下载, download douyin video, 抖音视频下载, douyin no watermark, 抖音无水印下载, douyin hd download, save douyin video, douyin to mp4, 抖音MP4下载',
        'h1' => 'Douyin Video Downloader - 抖音视频下载器',
        'subtitle' => 'Download Douyin (抖音) videos without watermark | 抖音视频无水印下载 | HD 1080p, 4K quality | MP4 & MP3 formats | Free unlimited downloads',
        'placeholder' => 'Paste Douyin video link (抖音视频链接: douyin.com/... or v.douyin.com/...)',
        'faq' => [
            [
                'question' => 'Does Douyin download have watermark?',
                'answer' => 'No, all downloaded Douyin videos are watermark-free with original HD quality.'
            ],
            [
                'question' => 'Can I download Douyin audio separately?',
                'answer' => 'Yes, you can download just the audio/music from Douyin videos in MP3 format.'
            ],
            [
                'question' => 'Is Douyin different from TikTok?',
                'answer' => 'Douyin is the Chinese version of TikTok. Both are supported by our downloader.'
            ],
            [
                'question' => 'Do I need a Douyin account?',
                'answer' => 'No account needed. Just paste the Douyin video link and download.'
            ]
        ],
        'howTo' => [
            'step1' => 'Copy the Douyin video link from the app',
            'step2' => 'Paste the link and click Start',
            'step3' => 'Download video or audio to your device'
        ]
    ],
    'bilibili' => [
        'name' => 'Bilibili',
        'icon' => '/assets/images/platforms/bilibili.svg',
        'color' => '#00A1D6',
        'pageTitle' => 'Bilibili Video Downloader - B站视频下载 Download Bilibili Videos HD 4K Free 2025',
        'metaDescription' => 'Free Bilibili downloader 2025 - Download Bilibili (B站/哔哩哔哩) videos, anime in HD 1080p, 4K. B站视频下载. Save Bilibili videos & subtitles. Fast, unlimited & 100% free.',
        'metaKeywords' => 'bilibili downloader, b站下载, download bilibili video, B站视频下载, 哔哩哔哩下载, bilibili video downloader, bilibili anime download, b站视频解析, bilibili hd download, bilibili to mp4',
        'h1' => 'Bilibili Video Downloader - B站视频下载器',
        'subtitle' => 'Download Bilibili (B站/哔哩哔哩) videos & anime | HD 1080p, 4K quality | Subtitle support | Free unlimited downloads | No app needed',
        'placeholder' => 'Paste Bilibili video URL (bilibili.com/video/... or b23.tv/...)',
        'faq' => [
            [
                'question' => 'Can I download Bilibili videos in HD?',
                'answer' => 'Yes, we support HD quality downloads for Bilibili videos including 1080p and higher when available.'
            ],
            [
                'question' => 'Can I download Bilibili anime?',
                'answer' => 'You can download public Bilibili content. Respect copyright and use downloads for personal viewing only.'
            ],
            [
                'question' => 'Does it work for all Bilibili videos?',
                'answer' => 'It works for most public Bilibili videos. Some region-locked or premium content may not be accessible.'
            ],
            [
                'question' => 'Do I need a Bilibili account?',
                'answer' => 'No account required for downloading public Bilibili videos.'
            ]
        ],
        'howTo' => [
            'step1' => 'Copy the Bilibili video URL from your browser',
            'step2' => 'Paste it in the input box and click Start',
            'step3' => 'Download the video in your preferred quality'
        ]
    ],
    'rednote' => [
        'name' => 'Rednote',
        'icon' => '/assets/images/platforms/rednote.svg',
        'color' => '#FF2442',
        'pageTitle' => 'Rednote Downloader - 小红书下载 Download Xiaohongshu Videos & Photos HD Free 2025',
        'metaDescription' => 'Free Rednote downloader 2025 - Download Xiaohongshu (小红书) videos & photos in HD. 小红书视频图片下载. Save Rednote content to any device. Fast, unlimited & 100% free.',
        'metaKeywords' => 'rednote downloader, 小红书下载, xiaohongshu downloader, 小红书视频下载, rednote video download, xiaohongshu photo download, 小红书图片下载, save rednote, xiaohongshu to mp4',
        'h1' => 'Rednote/Xiaohongshu Downloader - 小红书下载器',
        'subtitle' => 'Download Rednote (Xiaohongshu/小红书) videos & photos | 小红书视频图片下载 | HD quality | All content types | Free unlimited downloads',
        'placeholder' => 'Paste Rednote/Xiaohongshu URL (小红书链接: xiaohongshu.com/... or xhslink.com/...)',
        'faq' => [
            [
                'question' => 'Can I download Rednote videos?',
                'answer' => 'Yes, you can download both videos and photos from Rednote (Xiaohongshu) posts.'
            ],
            [
                'question' => 'What is Rednote/Xiaohongshu?',
                'answer' => 'Rednote (小红书/Xiaohongshu) is a popular Chinese social media platform for lifestyle and shopping content.'
            ],
            [
                'question' => 'Can I download Rednote photos?',
                'answer' => 'Yes, our downloader supports both video and photo downloads from Rednote posts.'
            ],
            [
                'question' => 'Do I need a Rednote account?',
                'answer' => 'No login required. Just paste the public post link.'
            ]
        ],
        'howTo' => [
            'step1' => 'Copy the Rednote post link',
            'step2' => 'Paste it in the input box and click Start',
            'step3' => 'Download the video or photo to your device'
        ]
    ],
    'weverse' => [
        'name' => 'Weverse',
        'icon' => '/assets/images/platforms/weverse.png',
        'color' => '#00D9A0',
        'pageTitle' => 'Weverse Downloader - Download Weverse Videos, Photos & Media HD Free 2025',
        'metaDescription' => 'Free Weverse downloader 2025 - Download Weverse videos, photos from BTS, BLACKPINK, SEVENTEEN & more K-pop artists. HD quality. Save Weverse media to any device. Fast, unlimited & 100% free.',
        'metaKeywords' => 'weverse downloader, download weverse video, weverse photo download, weverse media downloader, save weverse content, kpop downloader, bts weverse download, blackpink weverse, weverse to mp4',
        'h1' => 'Weverse Video & Media Downloader - K-pop Content',
        'subtitle' => 'Download Weverse videos & photos from BTS, BLACKPINK, SEVENTEEN & all K-pop artists | HD quality | All media types | Free unlimited downloads',
        'placeholder' => 'Paste Weverse post URL (weverse.io/... artist content)',
        'faq' => [
            [
                'question' => 'Can I download Weverse videos?',
                'answer' => 'Yes, you can download videos and photos posted by artists on Weverse platform.'
            ],
            [
                'question' => 'What is Weverse?',
                'answer' => 'Weverse is a global fan community platform where artists and fans connect, popular with K-pop groups.'
            ],
            [
                'question' => 'Can I download from all artists?',
                'answer' => 'You can download public content. Some exclusive or membership content may not be accessible.'
            ],
            [
                'question' => 'Do I need a Weverse account?',
                'answer' => 'For public posts, no account needed. Private/membership content requires login on Weverse.'
            ]
        ],
        'howTo' => [
            'step1' => 'Copy the Weverse post link',
            'step2' => 'Paste it in the input box and click Start',
            'step3' => 'Download the media to your device'
        ]
    ]
];

function getPlatformConfig($platform) {
    global $platformConfigs;
    return isset($platformConfigs[$platform]) ? $platformConfigs[$platform] : null;
}

function generateHowToSchema($platform, $config) {
    $baseUrl = getBaseUrl();
    $schema = [
        "@context" => "https://schema.org",
        "@type" => "HowTo",
        "name" => "How to Download {$config['name']} Videos",
        "description" => $config['metaDescription'],
        "step" => [
            [
                "@type" => "HowToStep",
                "position" => 1,
                "name" => "Copy Link",
                "text" => $config['howTo']['step1']
            ],
            [
                "@type" => "HowToStep",
                "position" => 2,
                "name" => "Paste and Analyze",
                "text" => $config['howTo']['step2']
            ],
            [
                "@type" => "HowToStep",
                "position" => 3,
                "name" => "Download",
                "text" => $config['howTo']['step3']
            ]
        ]
    ];
    return json_encode($schema, JSON_UNESCAPED_SLASHES | JSON_PRETTY_PRINT);
}

function generateFAQSchema($config) {
    $questions = [];
    foreach ($config['faq'] as $item) {
        $questions[] = [
            "@type" => "Question",
            "name" => $item['question'],
            "acceptedAnswer" => [
                "@type" => "Answer",
                "text" => $item['answer']
            ]
        ];
    }

    $schema = [
        "@context" => "https://schema.org",
        "@type" => "FAQPage",
        "mainEntity" => $questions
    ];

    return json_encode($schema, JSON_UNESCAPED_SLASHES | JSON_PRETTY_PRINT);
}

function getBaseUrl() {
    $protocol = isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on' ? 'https' : 'http';
    $host = $_SERVER['HTTP_HOST'];
    return $protocol . '://' . $host;
}

function getCurrentCleanUrl() {
    $baseUrl = getBaseUrl();
    $uri = $_SERVER['REQUEST_URI'];
    $uri = preg_replace('/\.php$/', '', parse_url($uri, PHP_URL_PATH));
    return $baseUrl . $uri;
}